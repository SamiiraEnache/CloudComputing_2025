{"ast":null,"code":"import React,{useEffect,useState}from'react';import{getWatchlist}from'../services/api';import MovieCard from'../components/MovieCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WatchlistPage=()=>{const[watchlist,setWatchlist]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const userId='test_user';useEffect(()=>{getWatchlist(userId).then(res=>{var _res$data;console.log(\"WATCHLIST_BACKEND:\",res.data);const wl=(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.watchlist;if(Array.isArray(wl)){setWatchlist(wl);}else{console.warn(\"⚠️ watchlist nu e array\",typeof wl);setWatchlist([]);}}).catch(err=>{console.error(\"Eroare la fetch watchlist:\",err);setError(\"A apărut o eroare la încărcarea watchlist-ului.\");setWatchlist([]);}).finally(()=>setLoading(false));},[]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Se \\xEEncarc\\u0103 filmele...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Watchlist\"}),watchlist.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Nu ai filme \\xEEn watchlist.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap'},children:watchlist.map((movie,index)=>/*#__PURE__*/_jsx(MovieCard,{...movie},index))})]});};export default WatchlistPage;","map":{"version":3,"names":["React","useEffect","useState","getWatchlist","MovieCard","jsx","_jsx","jsxs","_jsxs","WatchlistPage","watchlist","setWatchlist","loading","setLoading","error","setError","userId","then","res","_res$data","console","log","data","wl","Array","isArray","warn","catch","err","finally","children","length","style","display","gap","flexWrap","map","movie","index"],"sources":["C:/Users/Administrator/PycharmProjects/CloudComputing HW3/movieapp-frontend/src/pages/WatchlistPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getWatchlist } from '../services/api';\r\nimport MovieCard from '../components/MovieCard';\r\n\r\nconst WatchlistPage = () => {\r\n  const [watchlist, setWatchlist] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const userId = 'test_user';\r\n\r\n  useEffect(() => {\r\n    getWatchlist(userId)\r\n      .then(res => {\r\n        console.log(\"WATCHLIST_BACKEND:\", res.data);\r\n        const wl = res.data?.watchlist;\r\n\r\n        if (Array.isArray(wl)) {\r\n          setWatchlist(wl);\r\n        } else {\r\n          console.warn(\"⚠️ watchlist nu e array\", typeof wl);\r\n          setWatchlist([]);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Eroare la fetch watchlist:\", err);\r\n        setError(\"A apărut o eroare la încărcarea watchlist-ului.\");\r\n        setWatchlist([]);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  if (loading) return <p>Se încarcă filmele...</p>;\r\n  if (error) return <p>{error}</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Watchlist</h2>\r\n      {watchlist.length === 0 ? (\r\n        <p>Nu ai filme în watchlist.</p>\r\n      ) : (\r\n        <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\r\n          {watchlist.map((movie, index) => (\r\n            <MovieCard key={index} {...movie} />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WatchlistPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,YAAY,KAAQ,iBAAiB,CAC9C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1B,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACU,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAc,MAAM,CAAG,WAAW,CAE1Bf,SAAS,CAAC,IAAM,CACdE,YAAY,CAACa,MAAM,CAAC,CACjBC,IAAI,CAACC,GAAG,EAAI,KAAAC,SAAA,CACXC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAEH,GAAG,CAACI,IAAI,CAAC,CAC3C,KAAM,CAAAC,EAAE,EAAAJ,SAAA,CAAGD,GAAG,CAACI,IAAI,UAAAH,SAAA,iBAARA,SAAA,CAAUT,SAAS,CAE9B,GAAIc,KAAK,CAACC,OAAO,CAACF,EAAE,CAAC,CAAE,CACrBZ,YAAY,CAACY,EAAE,CAAC,CAClB,CAAC,IAAM,CACLH,OAAO,CAACM,IAAI,CAAC,yBAAyB,CAAE,MAAO,CAAAH,EAAE,CAAC,CAClDZ,YAAY,CAAC,EAAE,CAAC,CAClB,CACF,CAAC,CAAC,CACDgB,KAAK,CAACC,GAAG,EAAI,CACZR,OAAO,CAACN,KAAK,CAAC,4BAA4B,CAAEc,GAAG,CAAC,CAChDb,QAAQ,CAAC,iDAAiD,CAAC,CAC3DJ,YAAY,CAAC,EAAE,CAAC,CAClB,CAAC,CAAC,CACDkB,OAAO,CAAC,IAAMhB,UAAU,CAAC,KAAK,CAAC,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAID,OAAO,CAAE,mBAAON,IAAA,MAAAwB,QAAA,CAAG,+BAAqB,CAAG,CAAC,CAChD,GAAIhB,KAAK,CAAE,mBAAOR,IAAA,MAAAwB,QAAA,CAAIhB,KAAK,CAAI,CAAC,CAEhC,mBACEN,KAAA,QAAAsB,QAAA,eACExB,IAAA,OAAAwB,QAAA,CAAI,WAAS,CAAI,CAAC,CACjBpB,SAAS,CAACqB,MAAM,GAAK,CAAC,cACrBzB,IAAA,MAAAwB,QAAA,CAAG,8BAAyB,CAAG,CAAC,cAEhCxB,IAAA,QAAK0B,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,MAAM,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAL,QAAA,CAC5DpB,SAAS,CAAC0B,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,gBAC1BhC,IAAA,CAACF,SAAS,KAAiBiC,KAAK,EAAhBC,KAAmB,CACpC,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}